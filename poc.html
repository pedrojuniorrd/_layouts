<!DOCTYPE html>
<html>
<head>
  <title>PoC PostMessage Viewer</title>
  <style>
    body {
      font-family: monospace;
      white-space: pre-wrap;
      background: #111;
      color: #0f0;
      padding: 20px;
    }
  </style>
</head>
<body>
  <h1>ðŸ“© PostMessage Monitor Ativo</h1>
  <div id="log"></div>

  <script>
    const logDiv = document.getElementById("log");

    function log(message) {
      const p = document.createElement("div");
      p.textContent = message;
      logDiv.appendChild(p);
    }

    window.addEventListener("message", function(event) {
      log("ðŸ”¹ Origin: " + event.origin);
      log("ðŸ”¹ Data: " + JSON.stringify(event.data, null, 2));
      log("ðŸ”¹ ---");
    });

    // Envia uma mensagem de volta ao parent para confirmar que estÃ¡ ativo
    log("ðŸ“¤ Enviando ping inicial para window.parent...");
    window.parent.postMessage("ðŸ‘‹ Hello from PoC iframe", "*");
  </script>
</body>
</html>
